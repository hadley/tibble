<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Repair the names of a vector — name-repair • tibble</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<meta property="og:title" content="Repair the names of a vector — name-repair" />

<meta property="og:description" content="tibble deals with a few levels of name repair:
minimal names exist. The names attribute is not NULL. The name of
an unnamed element is &quot;&quot; and never NA. Tibbles created by the tibble
package have names that are, at least, minimal.
unique names are minimal, have no duplicates, and are never empty
(literally, no &quot;&quot;s).
All columns can be accessed by name via df[[&quot;name&quot;]].

universal names are unique and syntactic (see Details for more).
Names work everywhere, without quoting: df$name and
lm(name1 ~ name2, data = df) and dplyr::select(df, name) all work.

" />

<meta property="og:description" content="universal implies unique, unique implies minimal. These levels are
nested.
The .name_repair argument of tibble() and as_tibble() refers to these
levels. Alternatively, the user can pass their own name repair function. It
should anticipate minimal names as input and should, likewise, return names
that are at least minimal.
The existing functions tidy_names(), set_tidy_names(),
and repair_names() are soft-deprecated." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tibble</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.4.99.9006</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/tibble.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/extending.html">Extending tibble</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/tibble">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Repair the names of a vector</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/tibble/blob/master/R/repair-names.R'><code>R/repair-names.R</code></a></small>
    <div class="hidden name"><code>name-repair.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>tibble deals with a few levels of name repair:</p><ul>
<li><p><code>minimal</code> names exist. The <code>names</code> attribute is not <code>NULL</code>. The name of
an unnamed element is <code>""</code> and never <code>NA</code>. Tibbles created by the tibble
package have names that are, at least, <code>minimal</code>.</p></li>
<li><p><code>unique</code> names are <code>minimal</code>, have no duplicates, and are never empty
(literally, no <code>""</code>s).</p><ul>
<li><p>All columns can be accessed by name via <code>df[["name"]]</code>.</p></li>
</ul></li>
<li><p><code>universal</code> names are <code>unique</code> and syntactic (see Details for more).</p><ul>
<li><p>Names work everywhere, without quoting: <code>df$name</code> and
<code><a href='https://www.rdocumentation.org/packages/stats/topics/lm'>lm(name1 ~ name2, data = df)</a></code> and <code><a href='http://dplyr.tidyverse.org/reference/select.html'>dplyr::select(df, name)</a></code> all work.</p></li>
</ul></li>
</ul>

    <p><code>universal</code> implies <code>unique</code>, <code>unique</code> implies <code>minimal</code>. These levels are
nested.</p>
<p>The <code>.name_repair</code> argument of <code><a href='tibble.html'>tibble()</a></code> and <code><a href='as_tibble.html'>as_tibble()</a></code> refers to these
levels. Alternatively, the user can pass their own name repair function. It
should anticipate <code>minimal</code> names as input and should, likewise, return names
that are at least <code>minimal</code>.</p>
<p>The existing functions <code><a href='name-repair-retired.html'>tidy_names()</a></code>, <code><a href='name-repair-retired.html'>set_tidy_names()</a></code>,
and <code><a href='name-repair-retired.html'>repair_names()</a></code> are soft-deprecated.</p>
    
    </div>

        
    <h2 class="hasAnchor" id="minimal-names"><a class="anchor" href="#minimal-names"></a><code>minimal</code> names</h2>

    
    <p><code>minimal</code> names exist. The <code>names</code> attribute is not <code>NULL</code>. The name of an
unnamed element is <code>""</code> and never <code>NA</code>.</p>
<p>Examples:</p><pre>Original names of a vector with length 3: NULL
                           minimal names: "" "" ""
    Original names: "x" NA
                           minimal names: "x" ""
</pre>
    <p>Request <code>.name_repair = "minimal"</code> to suppress almost all name munging. This
is useful when the first row of a data source -- allegedly variable names --
actually contains <em>data</em> and the resulting tibble is destined for reshaping
with, e.g., <code>tidyr::gather()</code>.</p>
    
    <h2 class="hasAnchor" id="unique-names"><a class="anchor" href="#unique-names"></a><code>unique</code> names</h2>

    
    <p><code>unique</code> names are <code>minimal</code>, have no duplicates, and are never empty
(literally, no <code>""</code>s). If a data frame has <code>unique</code> names, you can index it
by name, e.g., <code>df[["name"]]</code> works.</p>
<p>There are many ways to make names <code>unique</code>. We append a suffix of the form
<code>..j</code> to any name that is <code>""</code> or a duplicate, where <code>j</code> is the position.</p>
<p>Example:</p><pre>Original names:    ""    "x"    "" "y"    "x"
  unique names: "..1" "x..2" "..3" "y" "x..5"
</pre>
    <p>Pre-existing suffixes of the form <code>..j</code> are always stripped, prior to making
names <code>unique</code>, i.e. reconstructing the suffixes. If this interacts poorly
with your names, you should take control of name repair.</p>
    
    <h2 class="hasAnchor" id="universal-names"><a class="anchor" href="#universal-names"></a><code>universal</code> names</h2>

    
    <p><code>universal</code> names are <code>unique</code> and syntactic, meaning they:</p><ul>
<li><p>Are never empty (inherited from <code>unique</code>).</p></li>
<li><p>Have no duplicates (inherited from <code>unique</code>).</p></li>
<li><p>Consist of letters, numbers, and the dot <code>.</code> or underscore <code>_</code>
characters.</p></li>
<li><p>Start with a letter or start with the dot <code>.</code> not followed by a number.</p></li>
<li><p>Are not a <a href='https://www.rdocumentation.org/packages/base/topics/Reserved'>reserved</a> word, e.g., <code>if</code> or <code>function</code> or <code>TRUE</code>.</p></li>
<li><p>Are not <code>...</code>. Do not have the form <code>..i</code>, where <code>i</code> is a number.</p></li>
</ul>
    <p>If a data frame has <code>universal</code> names, variable names can be used "as is" in
code. They work well with nonstandard evaluation, e.g., <code>df$name</code> works.</p>
<p>Tibble has a different method of making names syntactic than
<code><a href='https://www.rdocumentation.org/packages/base/topics/make.names'>base::make.names()</a></code>. In general, tibble prepends one or more dots <code>.</code> until
the name is syntactic.</p>
<p>Examples:</p><pre> Original names:     ""    "x"    NA     "x"
universal names: "...1" "x..2" "...3" "x..4"
    Original names: "(y)"  "_z"  ".2fa"  "FALSE"  "..."  "..3"
 universal names: ".y." "._z" "..2fa" ".FALSE" "...." "...6"
</pre>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rlang.r-lib.org/reference/names2.html'>rlang::names2()</a></code> returns the names of an object, after making them
<code>minimal</code>.</p>
<p>The <a href='https://principles.tidyverse.org/names-attribute.html'>Names attribute</a>
section in the "tidyverse package development principles".</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'>## by default, duplicate names are not allowed</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='co'># }</span><div class='input'><span class='co'>## you can authorize duplicate names</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='st'>"minimal"</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;       x     x
#&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1     1     2</div><div class='input'><span class='co'>## or request that the names be made unique</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='st'>"unique"</span>)</div><div class='output co'>#&gt; <span class='message'>New names:</span>
#&gt; <span class='message'>* x -&gt; x..1</span>
#&gt; <span class='message'>* x -&gt; x..2</span></div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;    x..1  x..2
#&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1     1     2</div><div class='input'>
<span class='co'>## by default, non-syntactic names are allowed</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>`a 1`</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>`a 2`</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='co'>## because you can still index by name</span>
<span class='no'>df</span><span class='kw'>[[</span><span class='st'>"a 1"</span>]]</div><div class='output co'>#&gt; [1] 1</div><div class='input'><span class='no'>df</span>$<span class='no'>`a 1`</span></div><div class='output co'>#&gt; [1] 1</div><div class='input'>
<span class='co'>## syntactic names are easier to work with, though, and you can request them</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>`a 1`</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>`a 2`</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='st'>"universal"</span>)</div><div class='output co'>#&gt; <span class='message'>New names:</span>
#&gt; <span class='message'>* `a 1` -&gt; a.1</span>
#&gt; <span class='message'>* `a 2` -&gt; a.2</span></div><div class='input'><span class='no'>df</span>$<span class='no'>a.1</span></div><div class='output co'>#&gt; [1] 1</div><div class='input'>
<span class='co'>## you can specify your own name repair function</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='no'>make.unique</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;       x   x.1
#&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1     1     2</div><div class='input'>
<span class='no'>fix_names</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/grep'>gsub</a></span>(<span class='st'>"%"</span>, <span class='st'>" percent"</span>, <span class='no'>x</span>)
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>`25%`</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>`75%`</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='no'>fix_names</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;   `25 percent` `75 percent`
#&gt;          &lt;dbl&gt;        &lt;dbl&gt;
#&gt; 1            1            2</div><div class='input'>
<span class='no'>fix_names</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/grep'>gsub</a></span>(<span class='st'>"\\s+"</span>, <span class='st'>"_"</span>, <span class='no'>x</span>)
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>`year 1`</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>`year 2`</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='no'>fix_names</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;   year_1 year_2
#&gt;    &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1      1      2</div><div class='input'>
<span class='co'>## purrr-style anonymous functions and constants</span>
<span class='co'>## are also supported</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> ~ <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/make.names'>make.names</a></span>(<span class='no'>.</span>, <span class='kw'>unique</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;       x   x.1
#&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1     1     2</div><div class='input'>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> ~ <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>))</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;       a     b
#&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1     1     2</div><div class='input'>
<span class='co'>## the names attibute will be non-NULL, with "" as the default element</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='as_tibble.html'>as_tibble</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='fl'>1</span>:<span class='fl'>3</span>, <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]), <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='st'>"minimal"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; [1] "" ""</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#minimal-names"><code>minimal</code> names</a></li>

      <li><a href="#unique-names"><code>unique</code> names</a></li>

      <li><a href="#universal-names"><code>universal</code> names</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>tibble is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://krlmlr.info'>Kirill Müller</a>, <a href='http://hadley.nz'>Hadley Wickham</a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>
      </footer>
   </div>

  

  </body>
</html>

